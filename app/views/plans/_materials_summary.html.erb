<%# locals: (materials_summary:) %>

<% if materials_summary.any? %>
  <div class="material-list">
    <% materials_summary.each do |mat_id, qty| %>
      <% material = @materials_lookup[mat_id.to_i] %>
      
      <div class="material-grid-item">
        <div class="item-icon rarity-border-<%= material.rarity %>">
          <div class="rarity-bg-<%= material.rarity %>">
            <% if material.image_url.present? %>
              <%= image_tag(material.image_url, alt: material.name)%>
            <% else %>
              <span class="icon-initials"><%= material.name[0..1].upcase %></span>
            <% end %>
          </div>
        </div>

        <div class="mat-details">
          <span class="quantity-number"><%= format_quantity(qty) %></span>
        </div>
      </div>
    <% end %>
  </div>
<% else %>
  <p class="empty-text">No plans created yet.</p>
<% end %>