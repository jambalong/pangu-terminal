<%= turbo_frame_tag "main_content" do %>
  <div class="inventory-container">
    <div class="inventory-header">
      <h1 class="inventory-title">Inventory</h1>
      
      <%= form_with url: inventory_items_path, method: :get, 
          data: { turbo_frame: "inventory-grid" }, 
          class: "filter-form" do |f| %>

        <div class="select-wrapper">
          <%= f.select :plan_id, 
              options_for_select(@plans.map { |p| [p.subject.name, p.id] }, params[:plan_id]), 
              { include_blank: "All Plans" }, 
              { 
                class: "inventory-select", 
                onchange: "this.form.requestSubmit()",
                "aria-label": "Filter by plan"
              } %>
        </div>
        
        <div class="search-wrapper">
          <%= f.text_field :query, 
              placeholder: "Search materials...", 
              class: "inventory-input",
              autocomplete: "off",
              oninput: "this.form.requestSubmit()" %>
        </div>
            
        <div class="select-wrapper">
          <%= f.select :category, 
              options_for_select(@categories, params[:category]), 
              { include_blank: "All Categories" }, 
              { 
                class: "inventory-select", 
                onchange: "this.form.requestSubmit()",
                "aria-label": "Filter by category"
              } %>
        </div>
      <% end %>
    </div>

    <%= turbo_frame_tag "inventory-grid" do %>
      <% if @inventory_items.empty? %>
        <div class="empty-state">
          <p>No data available based on selected filters.</p>
        </div>
      <% else %>
        <div class="inventory-grid">
          <%= render @inventory_items %>
        </div>
      <% end %>
    <% end %>
  </div>
<% end %>