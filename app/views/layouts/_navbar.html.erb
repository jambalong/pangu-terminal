<header class="navbar-main" data-controller="navbar">
  <div class="navbar-container">
    <% if user_signed_in? %>
      <%= link_to authenticated_root_path, data: { turbo: false }, class: "brand-logo" do %>
        P<span>T</span>
      <% end %>
    <% else %>
      <%= link_to root_path, data: { turbo: false }, class: "brand-logo" do %>
        P<span>T</span>
      <% end %>
    <% end %>

    <button class="hamburger-btn" 
            data-action="click->navbar#toggle" 
            data-navbar-target="icon"
            aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <div class="navbar-content" data-navbar-target="menu">
      <nav class="navbar-links">
        <%= link_to "Planner", plans_path, 
            data: { 
              turbo_frame: "main_content", 
              turbo_action: "advance",
              action: "click->navbar#close",
              navbar_target: "planner"
            }, 
            class: "nav-link nav-plan" %>
        <%= link_to "Inventory", inventory_items_path, 
            data: { 
              turbo_frame: "main_content", 
              turbo_action: "advance",
              turbo: (false unless user_signed_in?),
              action: "click->navbar#close",
              navbar_target: "inventory"
            }, 
            class: "nav-link nav-inventory" %>
      </nav>

      <div class="navbar-auths">
        <% if user_signed_in? %>
          <%= link_to current_user.email.split("@").first,
              authenticated_root_path,
              data: { 
                turbo_frame: "main_content", 
                turbo_action: "replace",
                action: "click->navbar#close",
                navbar_target: "dashboard"
              },
              class: "user-badge nav-dashboard" %>
          <%= link_to "Sign Out",
              destroy_user_session_path,
              data: {
                "turbo-method": :delete,
                turbo_frame: "_top"
              },
              class: "auth-btn-secondary" %>
        <% else %>
          <%= link_to "Sign In",
              new_user_session_path,
              data: { turbo: false },
              class: "sign-in" %>
        <% end %>
      </div>
    </div>
  </div>
</header>